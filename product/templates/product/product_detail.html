{% extends 'base.html' %}
{% load product_tags %}
{% load humanize %}

{% block titulo %} Página inicial {% endblock %}

{% block content %}
<div class="row">
	<div class="col-md-6">
		<img src="http://placehold.it/400x350" alt="">
    <div class="row">
    	<div class="col-md-10">
		    <div style="padding-top: 5px;">
		      <img src="http://placehold.it/97x50" alt="" style="padding-bottom: 5px;">
		      <img src="http://placehold.it/97x50" alt="" style="padding-bottom: 5px;">
		      <img src="http://placehold.it/97x50" alt="" style="padding-bottom: 5px;">
		      <img src="http://placehold.it/97x50" alt="" style="padding-bottom: 5px;">
		      <img src="http://placehold.it/97x50" alt="" style="padding-bottom: 5px;">
		      <img src="http://placehold.it/97x50" alt="" style="padding-bottom: 5px;">
		    </div>
	    </div>
   	</div>
	</div>
	<div class="col-md-6">
		<h3 class="text-center">{{ object.short_description|title }}</h3>
    <p class="text-center">{{ object.long_description|capfirst }}</p>
    <div class="well">
  		<h5><span style="color: #F32; text-decoration: line-through">De: R$ {{ object.sale_value|add:5|floatformat:2|intcomma }}</span></h5>
      <h2>Por: R$ {{ object.sale_value|floatformat:2|intcomma }}</h2>
    </div>
    <hr>
    <h6>TAMANHO</h6>
    <div class="form-group">
	    <select class="form-control">
	      <option>Selecione um tamanho</option>
	      <option>P</option>
	      <option>M</option>
	      <option>G</option>
	    </select>
	  </div>
	  <button id="btn-add-to-cart" type="button" class="btn btn-success btn-lg btn-block">Adicionar ao Carrinho</button>
	  <button type="button" class="btn btn-default btn-lg btn-block">Adicionar à Lista de Desejos</button>

	  <div class="ratings padding_top_50">
      <p class="pull-right">{{ product_reviews|length }} Opiniões</p>
      <p>
        {% for i in product_reviews|calculate_media|get_range %}
          <span class="glyphicon glyphicon-star"></span>
        {% endfor %}
        <p>{{ product_reviews|calculate_media }} Estrelas</p>
      </p>
    </div>
	</div>
</div>

<hr>

<div class="row">
	<div class="col-md-6">
		<h3>Detalhes do produto</h3>
		<p>{{ object.long_description }}</p>
		
		<h3>Informações</h3>
    <table class="table">
    {% for detail in product_details %}
      <tr>
        <td>{{ detail.name }}</td>
        <td>{{ detail.description }}</td>
    {% endfor %}
    </table>

		<h3>Veja mais</h3>
		<span class="label label-default"><a href="#" style="text-decoration: none; color: #FFF;">Bolsa</a></span>
		<span class="label label-default"><a href="#" style="text-decoration: none; color: #FFF;">Bolsa de Pano</a></span>
	</div>

	<div class="col-md-6">
		<h3>Recomendados para você</h3>
    {% for product in related_products %}
		  <a href="{% url 'product-detail' product.related_product.slug %}">
        <img src="http://placehold.it/180x250" alt="{{ product.related_product.short_description }}" style="padding-bottom: 5px;">
      </a>
    {% endfor %}
	</div>
</div>

<div class="well margin_top_50">
  <div class="text-right">
    <a class="btn btn-success">Deixe Um Comentário</a>
  </div>

  <hr>

  {% for review in product_reviews %}
  <div class="row">
    <div class="col-md-12">
    {% for i in review.score|get_range %}
      <span class="glyphicon glyphicon-star"></span>
    {% endfor %}
      <b>{{ review.client.full_name }} ({{ review.client.nickname }})</b>
      <span class="pull-right">{{ review.creation_date }}</span>
      <p>{{ review.opinion }}</p>
    </div>
  </div>
  <hr>
  {% empty %}
    <b>Produto não possui revisões.</b>
  {% endfor %}

</div>

{% endblock %}

{% block extra_js %}

<script>
    $('#btn-add-to-cart').on('click', function() {
      $.post('car/add/', {nome:'Guilherme'}, function(data, status){
        alert(data);
      });
    });
</script>

{% endblock %}

